<!--
  Copyright (c) 2024 vahidekhlasi
  هرگونه کپی، انتشار یا استفاده بدون اجازه پیگرد قانونی دارد.
  Telegram: https://t.me/vahidekhlasi
-->
<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>وایرگارد اختصاصی VIP</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      min-height: 100vh;
      margin: 0;
      padding: 0;
      background: linear-gradient(rgba(18,18,18,0.85),rgba(9,9,14,0.85)),
        url('https://raw.githubusercontent.com/ekhlasi/permag.ir/refs/heads/master/Pubg%20wallpaper.jpeg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Vazirmatn', 'Tahoma', 'Verdana', sans-serif;
      direction: rtl;
      text-align: center;
      overflow-x: hidden;
    }
    .vip-header {
      margin-top: 38px;
      margin-bottom: 15px;
      padding: 17px 0 9px 0;
      background: linear-gradient(90deg,#ffd70055 0,#00ffc355 80%);
      border-radius: 16px;
      box-shadow: 0 0 24px #ffd70077;
      display: inline-block;
      min-width: 260px;
      max-width: 92vw;
      filter: drop-shadow(0 0 8px #ffeb3b77);
      position: relative;
    }
    .vip-title {
      font-family: 'Vazirmatn', cursive, sans-serif;
      font-size: 2em;
      font-weight: bold;
      letter-spacing: 1.5px;
      background: linear-gradient(90deg,#ffd700 0,#00ffc3 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      filter: brightness(1.2);
      margin: 0;
      text-shadow: 0 0 14px #ffd70099,0 0 30px #00ffc355;
    }
    .vip-desc {
      font-family: 'Vazirmatn', cursive, sans-serif;
      font-size: 1.07em;
      color: #fffde7;
      margin-top: 9px;
      text-shadow: 0 0 6px #282d3388;
      font-weight: 500;
    }
    .attention {
      background: #fffbe1;
      border: 2px solid #ffd700;
      color: #b28800;
      font-weight: bold;
      padding: 12px 13px 11px 13px;
      margin: 18px auto 5px auto;
      max-width: 470px;
      border-radius: 11px;
      box-shadow: 0 2px 10px #ffd70033, 0 0 0 2px #fffbe188;
      font-size: 1.09em;
      line-height: 1.8;
      z-index: 100;
      position: relative;
      text-align: center;
      word-break: break-word;
    }
    .attention strong {
      color: #d68900;
      font-size: 1.05em;
    }
    .download-apps {
      margin: 24px auto 0 auto;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    .download-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 7px;
      background: linear-gradient(90deg,#00ffc3 0,#ffd700 100%);
      color: #0c242b;
      border: none;
      border-radius: 10px;
      font-family: 'Vazirmatn', cursive, sans-serif;
      font-size: 1.1em;
      font-weight: bold;
      padding: 11px 21px 10px 21px;
      margin: 0 4px 0 4px;
      box-shadow: 0 0 14px #00ffc322, 0 0 0 2px #ffd70044;
      transition: background .15s, color .12s, transform .09s;
      text-decoration: none;
      letter-spacing: 1.1px;
      cursor: pointer;
      outline: none;
      text-align: center;
    }
    .download-btn:hover {
      background: linear-gradient(90deg,#ffd700 0,#00ffc3 100%);
      color: #000;
      transform: scale(1.055);
      box-shadow: 0 3px 18px #ffd70044, 0 0 0 3px #00ffc366;
    }
    .download-btn svg {
      vertical-align: middle;
      width: 28px;
      height: 28px;
      filter: drop-shadow(0 0 6px #ffd70088);
    }
    @media (max-width: 600px) {
      .attention { font-size: .97em; max-width: 99vw; }
      .vip-title { font-size:1.3em;}
      .vip-header { min-width:160px; }
      #configForm {padding: 5vw 2vw;}
      pre {font-size:.89em;}
      .support, .donate { font-size: .93em;}
      .donate .cardnum {font-size:1em;}
      .download-apps {gap:8px;}
      .download-btn {font-size:.99em;padding:8px 12px;}
      .download-btn svg {width:22px;height:22px;}
    }
    #configForm {
      margin: 32px auto 18px;
      display: inline-block;
      background: rgba(30, 32, 34, 0.97);
      color: #e2e2e2;
      padding: 22px 22px 13px;
      border-radius: 18px;
      box-shadow: 0 0 16px 2px #000a, 0 0 0 6px #00e67622;
      border: 2px solid #00ffc387;
      min-width: 320px;
      max-width: 98vw;
    }
    label {
      font-size: 1.09em;
      color: #ffeb3b;
      text-shadow: 0 0 8px #000b;
      margin-bottom: 5px;
      margin-top: 11px;
      display: block;
      font-weight: bold;
      letter-spacing: .4px;
    }
    select {
      background: #18231b;
      color: #fff;
      border-radius: 6px;
      padding: 7px 12px;
      border: 2px solid #00e676;
      margin-top: 7px;
      margin-bottom: 11px;
      font-size: 1.04em;
      letter-spacing: .5px;
      transition: border 0.18s;
      box-shadow: 0 0 6px #00e67622;
    }
    select:focus {
      outline: none;
      border: 2px solid #ffeb3b;
    }
    button {
      background: linear-gradient(90deg,#00e676 0,#00ffc3 100%);
      color: #222;
      padding: 10px 30px;
      border: none;
      border-radius: 8px;
      font-family: 'Vazirmatn', cursive, sans-serif;
      font-size: 1.04em;
      font-weight: bold;
      margin-top: 13px;
      cursor: pointer;
      transition: background 0.18s, color 0.18s, box-shadow .15s, transform .10s;
      box-shadow: 0 4px 14px #00ffc344, 0 0 0 2px #ffeb3b33;
      letter-spacing: 1.2px;
      filter: drop-shadow(0 2px 10px #00ffc322);
    }
    button:hover,button:focus {
      background: linear-gradient(90deg,#ffeb3b 0,#00e676 100%);
      color: #000;
      transform: scale(1.06);
      box-shadow: 0 2px 16px #ffeb3b44, 0 0 0 3px #00e67677;
    }
    #result {
      margin-top: 24px;
      min-height: 50px;
      animation: floatin .7s;
    }
    @keyframes floatin {
      0% { opacity:0; transform: translateY(35px) scale(.9);}
      100% {opacity:1; transform: none;}
    }
    pre {
      text-align: left;
      direction: ltr;
      background: #121e18ee;
      color: #00ff95;
      padding: 13px 9px;
      border-radius: 11px;
      box-shadow: 0 0 9px #222;
      font-size: 1em;
      font-family: 'Vazirmatn', monospace, cursive;
      margin-bottom: 13px;
      margin-top: 13px;
      border: 2px solid #00e67655;
      overflow-x: auto;
      line-height: 1.7;
      word-break: break-all;
      user-select: text;
      transition: box-shadow 0.2s;
    }
    #dlbtn, #copybtn {
      display: inline-block;
      background: linear-gradient(90deg,#00ffc3 0,#ffeb3b 100%);
      color: #111;
      border: none;
      border-radius: 8px;
      font-family: 'Vazirmatn', cursive, sans-serif;
      font-size: 1em;
      padding: 8px 22px;
      margin-bottom: 6px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 0 8px #00e67644,0 0 0 2px #ffeb3b33;
      letter-spacing: 1.1px;
      margin-top: 3px;
      transition: background 0.13s, transform .08s;
    }
    #dlbtn:hover, #copybtn:hover {
      background: linear-gradient(90deg,#ffeb3b 0,#00ffc3 100%);
      color: #000;
      transform: scale(1.04);
      box-shadow: 0 0 11px #ffeb3b44,0 0 0 3px #00e67666;
    }
    .support {
      margin-top: 24px;
      font-weight: bold;
      background: rgba(30,30,30,0.80);
      display: inline-block;
      padding: 8px 19px;
      border-radius: 11px;
      color: #00e676;
      font-size: 1em;
      letter-spacing: 1px;
      box-shadow: 0 0 7px #00e67633;
      border: 2px solid #00ffc366;
      margin-bottom: 15px;
    }
    .support a {
      color: #ffeb3b;
      text-decoration: none;
      font-weight: bold;
      text-shadow: 0 0 6px #00e67677;
      transition: color .16s;
    }
    .support a:hover {
      color: #00ffc3;
    }
    .donate {
      margin: 12px auto 32px auto;
      display: inline-block;
      background: rgba(0,30,36,0.80);
      color: #ffe066;
      font-weight: bold;
      font-size: 1em;
      letter-spacing: 1.1px;
      padding: 10px 25px 7px 25px;
      border-radius: 11px;
      border: 2px solid #ffe06699;
      box-shadow: 0 0 10px #ffe06622;
      text-align: center;
      line-height: 2;
    }
    .donate .cardnum {
      display: block;
      font-size: 1.11em;
      color: #fff;
      background: #222d;
      padding: 6px 13px 5px 13px;
      border-radius: 6px;
      margin: 8px 0 0 0;
      letter-spacing: 2px;
      direction: ltr;
      text-align: center;
      user-select: all;
    }
    .donate .copybtn {
      margin-top: 8px;
      background: linear-gradient(90deg,#ffe066 0,#00e676 100%);
      color: #222;
      font-size: .96em;
      border: none;
      border-radius: 6px;
      padding: 5px 16px;
      cursor: pointer;
      font-weight: bold;
      letter-spacing: 1px;
      transition: background .16s, color .16s;
      box-shadow: 0 0 6px #ffe06644;
    }
    .donate .copybtn:hover {
      background: linear-gradient(90deg,#00e676 0,#ffe066 100%);
      color: #000;
    }
  </style>
</head>
<body>
  <div class="vip-header">
    <div class="vip-title">وایرگارد اختصاصی VIP</div>
    <div class="vip-desc">ساخت و دریافت کانفیگ ویژه و سریع WireGuard برای کاربران خاص و حرفه‌ای</div>
  </div>
  <div class="attention">
    📱 <strong>توجه مهم:</strong> فایل کانفیگ فقط با <b>.conf</b> دانلود و ذخیره می‌شود.<br>
    حتماً پسوند فایل را تغییر ندهید و اگر فایل با نام دیگری ذخیره شد، پسوند آن را به <b>.conf</b> تغییر دهید.<br>
    در تلگرام: روی سه‌نقطه بالا بزنید و "<strong>Open in Browser</strong>" را انتخاب کنید تا دانلود درست انجام شود.<br>
    همچنین می‌توانید با دکمه <b>کپی کانفیگ</b>، متن را مستقیماً در اپ وایرگارد پیست کنید.
  </div>
  <div class="download-apps">
    <a class="download-btn" href="https://play.google.com/store/apps/details?id=com.wireguard.android" target="_blank" rel="noopener">
      <svg viewBox="0 0 48 48"><g><circle cx="24" cy="24" r="24" fill="#3ddc84"/><path d="M12 35.7l19.1-8.9 4.1 1.7-18.7 8.8zm26.6-4.6c-.3-.4-.8-.7-1.2-.8l-5.5-2.3-4.9 2.3c-.4.2-.9.2-1.3 0l-2.1-1 13.7-6.5c.3-.2.4-.6.3-.9-.1-.3-.4-.5-.7-.6l-5.5-2.3-8.8 4.2c-.4.2-.9.2-1.3 0l-2.1-1 16.8-7.9c.3-.2.4-.6.3-.9-.1-.3-.4-.5-.7-.6l-19.3-8.2c-.4-.2-.9 0-1.1.4-.2.4 0 .9.4 1.1l2.1.8 5.5 2.2 8.8-4.2c.4-.2.9-.2 1.3 0l2.1 1-13.7 6.5c-.3.2-.4.6-.3.9.1.3.4.5.7.6l5.5 2.3 8.8-4.2c.4-.2.9-.2 1.3 0l2.1 1-16.8 7.9c-.3.2-.4.6-.3.9.1.3.4.5.7.6l19.3 8.2c.4.2.9 0 1.1-.4.2-.4 0-.9-.4-1.1z" fill="#fff"/></g></svg>
      دانلود وایرگارد اندروید
    </a>
    <a class="download-btn" href="https://apps.apple.com/app/wireguard/id1441195209" target="_blank" rel="noopener">
      <svg viewBox="0 0 48 48"><g><circle cx="24" cy="24" r="24" fill="#555"/><path d="M31.13 25.71c.01-3.18 2.59-4.7 2.7-4.77-1.47-2.15-3.75-2.45-4.56-2.48-1.94-.2-3.77 1.14-4.75 1.14-.98 0-2.48-1.12-4.08-1.09-2.09.03-4.04 1.22-5.12 3.09-2.19 3.79-.56 9.38 1.57 12.46 1.05 1.51 2.28 3.21 3.89 3.15 1.56-.06 2.16-1.01 4.05-1.01 1.89 0 2.43 1.01 4.08.97 1.69-.03 2.75-1.53 3.77-3.06 1.2-1.71 1.7-3.37 1.72-3.46-.04-.02-3.28-1.26-3.3-5.01zm-3.83-9.16c.86-1.04 1.44-2.5 1.28-3.95-1.24.05-2.75.83-3.65 1.87-.8.91-1.51 2.39-1.24 3.8 1.37.11 2.74-.7 3.61-1.72z" fill="#fff"/></g></svg>
      دانلود وایرگارد آیفون/آیپد
    </a>
  </div>
  <form id="configForm">
    <label for="country">انتخاب کشور:</label>
    <select id="country" name="country" required>
      <option value="">-- کشور را انتخاب کنید --</option>
      <option value="UAE">امارات</option>
      <option value="Bahrain">بحرین</option>
      <option value="Qatar">قطر</option>
      <option value="Germany">آلمان</option>
      <option value="Brazil">برزیل</option>
      <option value="Russia">روسیه</option>
      <option value="Iran">ایران</option>
      <option value="USA">آمریکا</option>
      <option value="Belgium">بلژیک</option>
    </select>
    <label for="mtuType">نوع شبکه (برای انتخاب MTU مناسب):</label>
    <select id="mtuType" name="mtuType">
      <option value="auto">خودکار (پیشنهادی)</option>
      <option value="mci">همراه اول (4G/5G)</option>
      <option value="mtn">ایرانسل (4G/5G)</option>
      <option value="wifi">وای فای (خانگی)</option>
      <option value="manual">انتخاب دستی</option>
    </select>
    <div id="manualMtuDiv" style="display:none;">
      <label for="mtu">انتخاب MTU دستی:</label>
      <select id="mtu" name="mtu">
        <option value="1280">1280</option>
        <option value="1350">1350</option>
        <option value="1380">1380</option>
        <option value="1400">1400</option>
        <option value="1450">1450</option>
        <option value="1452">1452</option>
        <option value="1472">1472</option>
        <option value="1500">1500</option>
      </select>
    </div>
    <br>
    <button type="submit">ساخت و دانلود کانفیگ</button>
  </form>
  <div id="result"></div>
  <div class="support">
    پشتیبانی <a href="https://t.me/vahidekhlasi" target="_blank">@vahidekhlasi</a>
  </div>
  <div class="donate">
    <span>اگر این سرویس برای شما مفید بود از ما حمایت کنید 🙏</span>
    <span class="cardnum" id="cardnum">6037&nbsp;9974&nbsp;6624&nbsp;8136</span>
    <button class="copybtn" onclick="copyCardNum()">کپی شماره کارت</button>
  </div>
  <script>
  // محدوده‌های IP هر کشور
  const ipRanges = {
    "UAE": [["94.200.0.0", "94.200.255.255"],["213.42.0.0", "213.42.255.255"]],
    "Bahrain": [["37.131.0.0", "37.131.255.255"],["188.221.0.0", "188.221.255.255"]],
    "Qatar": [["78.100.0.0", "78.100.255.255"],["212.77.192.0", "212.77.223.255"]],
    "Germany": [["80.128.0.0", "80.128.255.255"],["91.0.0.0", "91.15.255.255"],["217.0.0.0", "217.23.255.255"]],
    "Brazil": [["200.128.0.0", "200.135.255.255"],["201.6.0.0", "201.6.255.255"],["177.0.0.0", "177.255.255.255"]],
    "Russia": [["5.128.0.0", "5.191.255.255"],["37.192.0.0", "37.255.255.255"],["62.16.0.0", "62.31.255.255"]],
    "Iran": [["5.52.0.0", "5.55.255.255"],["37.32.0.0", "37.63.255.255"],["46.224.0.0", "46.239.255.255"]],
    "USA": [["3.0.0.0", "3.255.255.255"],["4.0.0.0", "4.255.255.255"],["8.0.0.0", "8.255.255.255"]],
    "Belgium": [["57.0.0.0", "57.255.255.255"],["78.20.0.0", "78.23.255.255"],["94.182.0.0", "94.182.255.255"]]
  };
  // پروفایل‌های MTU برای شبکه‌های مختلف
  const mtuProfiles = {
    mci: [1452, 1400, 1280, 1350],
    mtn: [1452, 1400, 1350],
    wifi: [1500, 1450, 1400]
  };
  function ipToInt(ip){return ip.split('.').reduce((a,b)=>a*256+parseInt(b),0);}
  function intToIp(int){return [24,16,8,0].map(s=>(int>>s)&255).join('.');}
  function randomCountryIp(c){let r=ipRanges[c],x=r[Math.floor(Math.random()*r.length)],a=ipToInt(x[0]),b=ipToInt(x[1]),v=a+Math.floor(Math.random()*(b-a+1));return intToIp(v);}
  function randomBase64(l=32){let arr=new Uint8Array(l);crypto.getRandomValues(arr);return btoa(String.fromCharCode.apply(null,arr));}
  function dnsList(n=7){let o=[];for(let i=0;i<n;++i)o.push(`${Math.floor(Math.random()*255)+1}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*254)+1}`);return o.join(', ');}
  function mainDns(){return ['10.202.10.10','78.157.42.100'][Math.floor(Math.random()*2)];}
  function randomMtu(){return [1280,1350,1380,1400,1450,1452,1472,1500][Math.floor(Math.random()*8)];}
  function profMtu(k){let arr=mtuProfiles[k];return arr[Math.floor(Math.random()*arr.length)];}
  function generateConfig(country, mtuType, mtuManual) {
    const privateKey = randomBase64();
    const publicKey = randomBase64();
    const presharedKey = randomBase64();
    const address = randomCountryIp(country);
    const dns = mainDns() + ", " + dnsList();
    let mtu;
    if(mtuType==="auto") mtu=randomMtu();
    else if(mtuType==="manual") mtu=mtuManual;
    else if(mtuProfiles[mtuType]) mtu=profMtu(mtuType);
    else mtu=randomMtu();
    const endpointIp = randomCountryIp(country);
    const endpointPort = Math.floor(Math.random()*55000)+10000;
    return `[Interface]
PrivateKey = ${privateKey}
Address = ${address}/24
DNS = ${dns}
MTU = ${mtu}

[Peer]
PublicKey = ${publicKey}
PresharedKey = ${presharedKey}
Endpoint = ${endpointIp}:${endpointPort}
PersistentKeepalive = 47
`;
  }
  function downloadConfig(config, filename) {
    // تاکید: فقط با پسوند conf دانلود شود
    let safeName = filename.replace(/\.[^\.]+$/, ".conf");
    if(!safeName.endsWith(".conf")) safeName += ".conf";
    const blob = new Blob([config], {type: 'text/plain'});
    const url = window.URL || window.webkitURL;
    const link = document.createElement('a');
    link.href = url.createObjectURL(blob);
    link.download = safeName;
    document.body.appendChild(link);
    link.click();
    setTimeout(()=>{document.body.removeChild(link);}, 200);
  }
  document.getElementById('mtuType').onchange=function(){
    document.getElementById('manualMtuDiv').style.display = this.value==="manual"?"block":"none";
  };
  document.getElementById('configForm').onsubmit=function(e){
    e.preventDefault();
    const country = document.getElementById('country').value;
    const mtuType = document.getElementById('mtuType').value;
    const mtuManual = document.getElementById('mtu')?document.getElementById('mtu').value:'';
    if(!country){alert('لطفا کشور را انتخاب کنید!');return;}
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = "در حال ساخت ...";
    setTimeout(()=>{
      const config = generateConfig(country, mtuType, mtuManual);
      const rawFilename = `wg_${country.toLowerCase()}_${Math.floor(Math.random()*90000+10000)}.conf`;
      resultDiv.innerHTML = `<pre>${config}</pre>
      <button id="dlbtn">دانلود فایل کانفیگ</button>
      <button id="copybtn" style="margin-right:10px;">کپی کانفیگ</button>
      <div style="color:#ff0000;font-weight:bold;font-size:.99em;margin-top:10px;">⬅️ فایل حتماً باید با پسوند <b>.conf</b> ذخیره شود.</div>`;
      document.getElementById('dlbtn').onclick=()=>downloadConfig(config, rawFilename);
      document.getElementById('copybtn').onclick=function(){
        if(window.getSelection){
          let pre = document.querySelector('#result pre');
          let range = document.createRange();
          range.selectNodeContents(pre);
          let sel = window.getSelection();
          sel.removeAllRanges();
          sel.addRange(range);
          try {
            document.execCommand('copy');
            alert('متن کانفیگ کپی شد!');
          } catch(e) {
            alert('کپی نشد! دستی متن را انتخاب و کپی کنید.');
          }
          sel.removeAllRanges();
        }
      }
    }, 700);
  };
  window.copyCardNum = function() {
    const card = "6037997466248136";
    if(navigator.clipboard){
      navigator.clipboard.writeText(card).then(()=>alert("شماره کارت کپی شد!"),()=>fallbackCopy(card));
    } else fallbackCopy(card);
    function fallbackCopy(text){
      const ta=document.createElement('textarea');
      ta.value=text;document.body.appendChild(ta);ta.select();
      try{document.execCommand('copy');alert('شماره کارت کپی شد!');}
      catch{alert('کپی نشد. دستی کپی کنید.');}
      document.body.removeChild(ta);
    }
  }
  </script>
  <!--
    ----------------------------------------------------------------------
    Copyright (c) 2024 vahidekhlasi

    تمامی حقوق این پروژه متعلق به vahidekhlasi است.
    کپی، انتشار و استفاده تجاری یا غیرتجاری، جز با اجازه کتبی صاحب اثر، مجاز نیست.
    سوال یا درخواست مجوز: https://t.me/vahidekhlasi
    ----------------------------------------------------------------------
  -->
</body>
</html>
